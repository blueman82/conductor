# Worktree Group Template
# ORGANIZATIONAL METADATA ONLY - not used for execution control

# Conductor uses depends_on fields for execution order, not worktree groups.
# Groups are for human organization and git workflow documentation.

# Basic Group (Documentation + Git Workflow)
- group_id: "auth-implementation"
  description: "Tasks 1→2→4 implement authentication flow"
  tasks: [1, 2, 4]  # Tasks in this group (for reference)
  rationale: "Related authentication tasks grouped for clarity"
  setup_commands: |
    # Git workflow suggestion (NOT enforced by conductor):
    git worktree add ../wt-auth -b feature/auth
    cd ../wt-auth

    # Task 1: Implement JWT module
    # [work on task 1]
    git add .
    git commit -m "feat: implement JWT module"

    # Task 2: Add auth middleware (depends on Task 1)
    # [work on task 2]
    git add .
    git commit -m "feat: add auth middleware"

    # Task 4: Wire auth to router (depends on Task 2)
    # [work on task 4]
    git add .
    git commit -m "feat: wire auth to router"

    # Merge when complete
    git checkout main
    git merge feature/auth
    git push origin main

# Independent Group
- group_id: "documentation"
  description: "Task 3 updates API documentation"
  tasks: [3]
  rationale: "Independent documentation task"
  setup_commands: |
    # Can work in parallel with auth-implementation:
    git worktree add ../wt-docs -b feature/docs
    cd ../wt-docs

    # Task 3: Update docs
    git add .
    git commit -m "docs: update API documentation"

    # Merge when complete
    git checkout main
    git merge feature/docs
    git push origin main

# Integration Group (Multiple Prerequisites)
- group_id: "integration"
  description: "Task 5 integrates auth with existing API"
  tasks: [5]
  rationale: "Integration task requiring completed auth and API tasks"
  setup_commands: |
    # Wait for prerequisite tasks to merge to main first
    # (Task 2 from auth-implementation, Task 3 from documentation)

    # Pull updated main with merged prerequisites
    git checkout main
    git pull origin main

    # Create integration worktree
    git worktree add ../wt-integration -b feature/integration
    cd ../wt-integration

    # Task 5: Integration work
    git add .
    git commit -m "feat: integrate auth with API"

    # Merge when complete
    git checkout main
    git merge feature/integration
    git push origin main

# EXECUTION NOTE:
# Conductor ignores these groups for execution control.
# Execution order determined by depends_on fields:
#   Wave 1: Tasks 1, 3 (both have depends_on: [])
#   Wave 2: Task 2 (depends_on: [1])
#   Wave 3: Task 4 (depends_on: [2])
#   Wave 4: Task 5 (depends_on: [2, 3])
